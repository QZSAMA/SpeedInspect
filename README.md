# SpeedInspect - 房屋状况智能检查系统

基于AI技术的房屋状况智能检查系统，帮助用户快速、客观、全面地了解房屋状况。

## 功能特性

### 核心模块
- **视频采集模块**：支持移动设备录制房屋视频，提供防抖处理和清晰度优化
- **AI图像分析模块**：视频帧提取、图像预处理及深度学习分析
- **问题识别与分类**：识别15+类常见房屋问题
- **报告生成**：自动生成结构化检查报告
- **用户界面**：直观的移动端友好界面

### AI分析技术

#### 核心原理

SpeedInspect的AI分析模块基于计算机视觉和深度学习技术，通过以下步骤实现房屋问题的智能检测：

1. **视频帧提取**：从录制的视频中按固定时间间隔提取关键帧
2. **图像预处理**：对提取的帧进行亮度调整、对比度优化和降噪处理
3. **特征提取**：使用深度学习模型提取图像中的视觉特征
4. **目标检测**：识别图像中的房屋问题，如裂缝、水渍、霉斑等
5. **问题分类**：将检测到的问题分类到相应类别，并评估严重程度
6. **结果聚合**：对多帧检测结果进行去重和置信度加权，生成最终结果

#### 技术实现

- **深度学习模型**：基于TensorFlow.js的目标检测和图像分类
- **多尺度分析**：在不同分辨率下分析图像，提高检测精度
- **特征提取**：提取颜色、纹理、边缘等视觉特征
- **上下文理解**：结合房屋类型和场景上下文提高检测准确性
- **实时处理**：浏览器端实时分析，保护用户隐私

#### 检测能力

系统能够检测15+类常见房屋问题，包括：
- 墙面损坏（裂缝、水渍、霉斑）
- 家具磨损（划痕、凹陷、褪色）
- 水电设施异常（管道漏水、插座损坏、开关故障）
- 地板、天花板、门窗问题
- 卫生间、厨房、照明问题
- 油漆、霉斑、水渍、虫害、安全隐患等

## 技术栈

- **前端**：React 18.2.0, Next.js 14.0.0, TypeScript
- **样式**：Tailwind CSS 3.3.0
- **状态管理**：Redux Toolkit 1.9.5
- **AI/ML**：TensorFlow.js
- **加密**：Crypto-js
- **图标**：Lucide React

## 快速开始

### 环境要求

- Node.js 18.17.0 或更高版本
- npm 9.6.7 或更高版本
- 现代浏览器（Chrome 90+、Firefox 88+、Edge 90+）
- 摄像头设备（用于视频采集）

### 安装依赖

```bash
# 克隆项目（如果尚未克隆）
git clone <repository-url>
cd SpeedInspect

# 安装依赖
npm install
```

### 配置环境变量

```bash
# 复制环境变量示例文件
cp .env.example .env.local

# 编辑 .env.local 文件，填入您的配置
# 注意：当前版本主要使用浏览器内置API，无需额外API密钥
```

### 启动开发服务器

```bash
npm run dev
```

访问 [http://localhost:3001](http://localhost:3001) 查看应用（默认端口3000，若被占用则使用3001）。

### 构建生产版本

```bash
# 构建应用
npm run build

# 启动生产服务器
npm start
```

### 常见问题解决

1. **摄像头权限问题**
   - 确保浏览器已授予摄像头访问权限
   - 检查系统设置中摄像头是否被其他应用占用
   - 尝试使用不同的浏览器

2. **视频录制失败**
   - 确保网络连接稳定
   - 检查设备存储空间是否充足
   - 尝试降低视频分辨率

3. **AI分析速度慢**
   - 关闭其他占用系统资源的应用
   - 确保浏览器支持WebGL加速
   - 尝试使用性能更好的设备

4. **浏览器兼容性问题**
   - 推荐使用Chrome浏览器获得最佳体验
   - 确保浏览器已更新到最新版本
   - 检查浏览器是否支持MediaStream API

5. **依赖安装失败**
   - 清理npm缓存：`npm cache clean --force`
   - 尝试使用yarn替代npm：`yarn install`
   - 检查网络连接是否正常

## 项目结构

```
SpeedInspect/
├── app/                    # Next.js App Router
│   ├── page.tsx           # 主页面
│   ├── layout.tsx         # 根布局
│   └── globals.css        # 全局样式
├── components/            # React组件
│   ├── VideoCapture.tsx   # 视频采集组件
│   ├── AnalysisProgress.tsx # 分析进度组件
│   └── ProblemList.tsx    # 问题列表组件
├── lib/                   # 核心库
│   ├── videoCapture.ts    # 视频采集模块
│   ├── aiAnalyzer.ts      # AI分析模块
│   ├── reportGenerator.ts # 报告生成模块
│   └── encryption.ts      # 加密存储模块
├── store/                 # Redux状态管理
│   ├── slices/
│   │   └── inspectionSlice.ts
│   ├── index.ts
│   └── providers.tsx
├── types/                 # TypeScript类型定义
│   └── index.ts
└── package.json
```

## 使用说明

### 详细使用步骤

1. **选择房屋类型**
   - 在欢迎页面选择适合的房屋类型：公寓、独栋房屋、办公室或商业用房
   - 不同类型的房屋会使用相应的检测模型和参数

2. **录制视频**
   - 点击「启动摄像头」按钮，授予浏览器摄像头访问权限
   - 缓慢移动摄像头，确保拍摄到房屋的每个角落
   - 重点关注：墙面、地板、天花板、门窗、水电设施等
   - 点击「开始录制」按钮开始录制，点击「停止录制」结束

3. **AI分析**
   - 系统会自动提取视频帧并进行分析
   - 分析过程中会显示实时进度和已发现的问题数量
   - 分析时间取决于视频长度和设备性能，通常为30秒到2分钟

4. **查看结果**
   - 分析完成后，系统会显示检测到的问题列表
   - 每个问题包含：类别、描述、严重程度、置信度、位置和修复建议
   - 页面顶部显示房屋状况综合评分和各类问题统计

5. **下载报告**
   - 点击「下载报告」按钮获取详细的HTML格式检查报告
   - 报告包含：房屋信息、问题详细列表、修复建议和预估费用
   - 可打印或分享报告给相关方

### 最佳实践

- **拍摄环境**：确保光线充足，避免强烈反光和阴影
- **拍摄角度**：保持摄像头稳定，避免过快移动
- **拍摄范围**：覆盖房屋所有主要区域，不要遗漏角落
- **拍摄时间**：每个区域停留足够时间，确保系统能捕获清晰画面
- **后期处理**：如有必要，可以对重要问题进行补充拍摄

## 数据安全

- 用户视频和检查报告使用AES加密存储
- 符合数据隐私保护法规
- 支持本地离线分析模式

## 开发规范

- 使用TypeScript进行类型安全开发
- 遵循React和Next.js最佳实践
- 代码提交前运行lint和类型检查
- 单元测试覆盖率≥80%

## 许可证

MIT License
